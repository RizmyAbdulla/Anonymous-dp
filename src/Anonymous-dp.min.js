document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("profile-name"),t=document.getElementById("profile-color-picker"),l=document.getElementById("profile-generate-dp"),n=document.getElementById("profile-save-dp"),o=document.querySelector(".profile-fname-input"),i=document.querySelector(".profile-lname-input"),a=document.getElementById("profile-cname-btn"),r=document.getElementById("profile-name-submit"),c=document.getElementById("profile-colorPickerBtn"),s=document.getElementById("profile-picture"),f=s.getContext("2d",{willReadFrequently:!0}),d=s.width,m=s.height;function p(){var e,t=Math.floor(256*Math.random()).toString(16).padStart(2,"0");return`#${t}${Math.floor(256*Math.random()).toString(16).padStart(2,"0")}${Math.floor(256*Math.random()).toString(16).padStart(2,"0")}`}function $(){var e,t,l,n,o,i,a,r=f.getImageData(0,0,1,1).data,c=s(r[0],r[1],r[2]);function s(e,t,l){var n,o=e.toString(16).padStart(2,"0");return"#"+o+t.toString(16).padStart(2,"0")+l.toString(16).padStart(2,"0")}return t=parseInt((e=c).substring(1,3),16),l=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16),o=255-t,i=255-l,s(o,i,a=255-n)}function u(){if(s.classList.contains("mode-1"))!function e(){f.clearRect(0,0,d,m);let t=[p(),p(),p(),];for(let l=0;l<d;l+=10)for(let n=0;n<m;n+=10){let o=t[Math.floor(Math.random()*t.length)];f.fillStyle=o,f.fillRect(l,n,10,10)}}();else if(s.classList.contains("mode-2"))!function e(){let l=document.querySelector(".profile-fname").textContent.charAt(0),n=document.querySelector(".profile-lname").textContent.charAt(0);f.clearRect(0,0,d,m);let o=[p(),p(),p(),];for(let i=0;i<d;i+=10)for(let a=0;a<m;a+=10){let r=o[Math.floor(Math.random()*o.length)];f.fillStyle=r,f.fillRect(i,a,10,10)}let c=s.className.match(/profile-font-color-([a-zA-Z0-9]+)/);c?f.fillStyle="#"+c[1]:s.classList.contains("mode-3")&&s.classList.contains("profile-font-complementary")?f.fillStyle=$():s.classList.contains("mode-2")&&s.classList.contains("profile-random-font-color")?f.fillStyle=p():t?f.fillStyle=t.value:f.fillStyle="#00000";let u=100,y=s.className.match(/profile-font-size-(\d+)/);y&&(u=10*parseInt(y[1])),f.font=`${u}px Arial`,f.textBaseline="middle",f.textAlign="center",f.fillText(l+n,d/2,m/2)}();else if(s.classList.contains("mode-3"))!function e(){let l=document.querySelector(".profile-fname").textContent.charAt(0),n=document.querySelector(".profile-lname").textContent.charAt(0);f.clearRect(0,0,d,m);let o=s.className.match(/profile-dp-color-([a-zA-Z0-9]+)/);o?f.fillStyle="#"+o[1]:s.classList.contains("mode-3")&&s.classList.contains("profile-random-dp-color")?f.fillStyle=p():f.fillStyle="#808080",f.fillRect(0,0,d,d);let i=s.className.match(/profile-font-color-([a-zA-Z0-9]+)/);i?f.fillStyle="#"+i[1]:s.classList.contains("mode-3")&&s.classList.contains("profile-font-complementary")?f.fillStyle=$():s.classList.contains("mode-3")&&s.classList.contains("profile-random-font-color")?f.fillStyle=p():t?f.fillStyle=t.value:f.fillStyle="#ffffff";let a=100,r=s.className,c=r.match(/profile-font-size-(\d+)/);c&&(a=10*parseInt(c[1])),f.font=`${a}px Arial`,f.textBaseline="middle",f.textAlign="center",f.fillText(l+n,d/2,m/2)}();else throw Error("Invalid canvas mode or no canvas mode class found")}if(l&&l.addEventListener("click",()=>{u()}),n&&n.addEventListener("click",function(){let e=s.toDataURL("image/png"),t=document.createElement("a");t.href=e,t.download="User-DP.png",t.click()}),t&&!c&&t.addEventListener("input",function(){let l=t.value;e.style.color=l}),c){var y=!1;c.addEventListener("click",function(){t.click(),y=!0}),t.addEventListener("focus",function(){y=!0,console.log(y)}),t.addEventListener("change",function(){let l=t.value;e.style.color=l}),t.addEventListener("blur",function(){y=!1,setTimeout(function(){y||u()},100)}),t.addEventListener("click",function(){y=!1})}function g(){document.querySelector(".profile-fname").textContent=o.value,document.querySelector(".profile-lname").textContent=i.value}r&&r.addEventListener("click",()=>{let e=document.getElementById("profile-name-change"),t=document.getElementById("profile-name");u(),e.style.display="none",t.style.display="block"}),a&&a.addEventListener("click",()=>{let e=document.getElementById("profile-name-change"),t=document.getElementById("profile-name");e.style.display="block",t.style.display="none"}),o&&o.addEventListener("input",g),i&&i.addEventListener("input",g),u()});